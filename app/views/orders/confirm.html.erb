<!-- app/views/orders/confirm.html.erb -->

<h2>ご注文内容の確認</h2>

<p><strong>メニュー:</strong> <%= @order.flower_type.name %></p>
<p><strong>ご希望金額:</strong> <%= number_with_delimiter(@order.custom_price) %> 円</p>
<p><strong>用途:</strong> <%= @order.usage.name %></p>
<p><strong>色味:</strong> <%= @order.color_tone.name %></p>
<p><strong>雰囲気:</strong> <%= @order.mood.name %></p>
<p><strong>参考画像:</strong> <%= image_tag @order.reference_image if @order.reference_image.attached? %></p>
<p><strong>備考:</strong> <%= @order.memo %></p>
<p><strong>受け取り方法:</strong> <%= @order.receive_method == "store_pickup" ? "店頭受け取り" : "配達" %></p>
<p><strong>受け取り希望日:</strong> <%= @order.receive_date %></p>

<% if @order.delivery? %>
  <p><strong>配達希望時間:</strong>
    <% label = case @order.receive_time.strftime("%H:%M")
      when "09:00" then "午前中"
      when "12:00" then "12:00〜15:00"
      when "15:00" then "15:00〜18:00"
      when "18:00" then "18時以降"
      else
        @order.receive_time.strftime("%H:%M")
    end %>
    <%= label %>
  </p>
  <p><strong>配達先の名前:</strong> <%= @order.delivery_name %></p>
  <p><strong>配達先の住所:</strong> <%= @order.delivery_address %></p>
<% end %>

<hr>

<p><strong>お名前:</strong> <%= @order.guest.name %></p>
<p><strong>電話番号:</strong> <%= @order.guest.phone_number %></p>
<p><strong>メール:</strong> <%= @order.guest.email %></p>

<!-- 修正するボタン -->
<%= button_to "修正する", new_order_path, method: :get, data: { turbo: false }, onclick: "sessionStorage.setItem('fromConfirm', 'true')" %>

<!-- 確定ボタン（セッションからcreateする） -->
<%= button_to "この内容で確定する", orders_path, method: :post, form_class: "inline-form" %>