<%= form_with model: @order, url: confirm_orders_path, method: :post, local: true, data: { turbo: false } do |f| %>

  <%# --- 花の種類の選択 --- %>
  <h2>1. メニューの選択</h2>

  <div id="flower-types">
    <% @flower_types.each do |type| %>
      <label style="display: inline-block; margin: 10px;">
        <%= f.radio_button :flower_type_id, type.id, id: "flower_type_#{type.id}", style: "display: none;" %>

        <div class="flower-type-card" data-flower-type-id="<%= type.id %>" style="cursor: pointer;">
          <% if type.image.attached? %>
            <%= image_tag type.image.variant(resize_to_limit: [200, 200]), alt: type.name %>
          <% end %>
          <p><%= type.name %></p>
        </div>
      </label>
    <% end %>
  </div>



  <%# --- サイズの選択エリア（JSで動的に挿入） --- %>
  <div id="sizes-container" style="display: none;">
    <h2>2. サイズの選択</h2>
  </div>



  <%# --- 用途の選択 --- %>
  <div id="usage-section" style="display: none;">
    <h2>3.詳細</h2>

    <%= f.label :usage_id, "用途" %><br>
    <%= f.collection_select(:usage_id, Usage.all, :id, :name, {}, { id: "usage-select" }) %>
  </div>

  <!-- 色味の選択 -->
  <div id="color-tone-section" style="display: none;">
    <%= f.label :color_tone_id, "色味" %><br>
    <%= f.collection_select(:color_tone_id, ColorTone.all, :id, :name, {}, { id: "color-tone-select" }) %>
  </div>

  <!-- 雰囲気の選択 -->
  <div id="mood-section" style="display: none;">
    <%= f.label :mood_id, "雰囲気" %><br>
    <%= f.collection_select(:mood_id, Mood.all, :id, :name, {}, { id: "mood-select" }) %>
  </div>

  <!-- 参考画像と備考 -->
  <div id="extra-section" style="display: none;">
    <%= f.label :reference_image, "参考画像をアップロード（任意）" %><br>
    <%= f.file_field :reference_image %><br><br>

    <%= f.label :memo, "備考欄（任意）" %><br>
    <%= f.text_area :memo, rows: 4 %>
  </div>



  <%# --- 受け取り方法の選択 --- %>
  <div id="receive-method-section" style="display: none;">
    <h2>4. 受け取り方法の選択</h2>

    <%= f.label :receive_method, "受け取り方法を選択してください" %><br>

    <%= f.radio_button :receive_method, :store_pickup, id: "pickup", required: true %>
    <%= f.label :receive_method_store_pickup, "店頭受け取り", for: "pickup" %><br>

    <%= f.radio_button :receive_method, :delivery, id: "delivery", required: true %>
    <%= f.label :receive_method_delivery, "配達", for: "delivery" %>
  </div>
<% end %>